<Window x:Class="Notebook.MainWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:tb="http://www.hardcodet.net/taskbar"
        xmlns:ci="clr-namespace:CommonInformation;assembly=CommonInformation"
        xmlns:notebook="clr-namespace:Notebook"
        Title="Ежедневник" Background="{x:Null}" AllowsTransparency="True"
        WindowStyle="None" ShowInTaskbar="False" Name="Window">
    <Window.DataContext>
        <notebook:NotesViewModel/>
    </Window.DataContext>
    <Window.Resources>
        <ResourceDictionary>
            <ResourceDictionary.MergedDictionaries>
                <ResourceDictionary Source="pack://application:,,,/CommonInformation;component/GenericResources.xaml" />
                <ResourceDictionary>
                    <ContextMenu x:Key="TrayMenu">
                        <ContextMenu.Items>
                            <MenuItem Header="New" Command="{x:Static notebook:WindowCommands.AddNewNoteCommand}"/>
                            <MenuItem Header="Open"/>
                            <MenuItem Header="Save"/>
                            <Separator></Separator>
                            <MenuItem Header="Закрыть" Command="{x:Static notebook:WindowCommands.CloseApplicationCommand}"/>
                        </ContextMenu.Items>
                    </ContextMenu>
                </ResourceDictionary>
            </ResourceDictionary.MergedDictionaries>
        </ResourceDictionary>
    </Window.Resources>
    <Border BorderBrush="Black" BorderThickness="1" Background="{StaticResource topBackgroundBrush}"
            CornerRadius="5,5,5,5">
        <Grid>
            <Grid.RowDefinitions>
                <RowDefinition Height="Auto"/>
                <RowDefinition Height="*"/>
            </Grid.RowDefinitions>
            <tb:TaskbarIcon LeftClickCommand="{x:Static notebook:WindowCommands.MoveToTopCommand}"
                            LeftClickCommandParameter="{Binding ElementName=Window}"
                            Grid.Row="0" IconSource="{Binding Source={x:Static ci:Images.TrayIconImage}}" 
                            ContextMenu="{StaticResource TrayMenu}" MenuActivation="RightClick"/>
            <Grid Grid.Row="0">
                <Button Command="{x:Static notebook:WindowCommands.MinimizeWindowCommand}"
                        CommandParameter="{Binding ElementName=Window}"
                        Width="32" Height="32" HorizontalAlignment="Right" Background="Red" Content="__"/>
            </Grid>
            <ListBox Grid.Row="1" ItemsSource="{Binding Notes}" Style="{StaticResource listboxNotesStyle}"/>
        </Grid>
    </Border>
</Window>
